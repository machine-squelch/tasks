<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DL///SALES_WAR_ROOM</title>
    <link href="tailwind.min.css" rel="stylesheet">
    <script src="https://cdn.socket.io/4.7.5/socket.io.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/drag-drop-touch@1.3.1/DragDropTouch.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Share+Tech+Mono&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="scan-glitch-overlay"></div>
    <div class="static-overlay"></div>
    
    <!-- Enhanced connection badge with CRM sync status -->
    <div id="connection-badge" class="connection-badge">
        [CONNECTING...]
    </div>
    
    <!-- New: CRM Sync Status -->
    <div id="crm-sync-badge" class="fixed top-20 right-20 px-3 py-1 bg-purple-900 border border-purple-500 rounded text-purple-400 text-xs">
        [CRM_SYNC_ACTIVE]
    </div>
    
    <!-- Enhanced users panel with sales roles -->
    <div class="users-panel hidden md:block">
        <h3 class="text-cyan-400 text-sm font-bold mb-2">[SALES_AGENTS_ONLINE]</h3>
        <div id="users-list"></div>
        
        <!-- New: Quick stats -->
        <div class="mt-4 pt-2 border-t border-cyan-800">
            <div class="text-xs text-cyan-600">TODAY'S STATS:</div>
            <div id="daily-stats" class="text-xs text-green-400">
                Tasks: <span id="tasks-today">0</span> | 
                Deals: $<span id="deals-today">0</span>
            </div>
        </div>
    </div>
    
    <!-- Enhanced activity feed with sales-specific messages -->
    <div class="activity-feed hidden md:block">
        <h3 class="text-green-400 text-sm font-bold mb-2">[SALES_ACTIVITY_MATRIX]</h3>
        <div id="activity-list"></div>
    </div>
    
    <!-- New: Weekly Leaderboard -->
    <div class="leaderboard-panel fixed top-20 left-20 w-64 bg-black bg-opacity-90 border border-yellow-500 rounded p-3 hidden" id="leaderboard-panel">
        <h3 class="text-yellow-400 text-sm font-bold mb-2">üèÜ [WEEKLY_LEADERBOARD]</h3>
        <div id="leaderboard-list" class="space-y-1"></div>
        <button onclick="toggleLeaderboard()" class="text-xs text-yellow-600 mt-2">MINIMIZE</button>
    </div>
    
    <div id="typing-indicator" class="typing-indicator" style="display: none;">
        <span id="typing-text"></span>
    </div>
    
    <div class="container mx-auto p-4 sm:p-6 lg:p-8 relative z-10">
        <header class="text-center mb-12">
            <div class="logo-container">
                <div class="crt-monitor" title="Click monitor to degauss">
                    <div class="crt-screen">
                        <div class="crt-burn"></div>
                        <div class="crt-static"></div>
                        <img src="dllogoonly.png" alt="DL" class="crt-logo" onclick="triggerMegaGlitch()" title="Click for SYSTEM BREACH">
                        <div style="position: absolute; top: 10%; left: 10%; width: 30%; height: 30%; background: radial-gradient(ellipse at top left, rgba(255, 255, 255, 0.1) 0%, transparent 50%); pointer-events: none; z-index: 5;"></div>
                    </div>
                </div>
            </div>
            
            <div class="inline-block">
                <h1 class="glitch text-4xl sm:text-5xl lg:text-7xl text-green-400 mb-2" data-text="SALES_WAR_ROOM">SALES_WAR_ROOM</h1>
                <div class="text-cyan-400 text-sm tracking-widest flicker">
                    [REAL_TIME_SYNC_ENABLED] | [CRM_INTEGRATED]
                </div>
            </div>
            
            <p class="text-green-400 text-lg corrupted mt-4">SALES_TEAM /// REVENUE_OPERATIONS_CENTER</p>
            
            <!-- Enhanced status bar with sales metrics -->
            <div id="auth-info" class="mt-4 text-sm">
                <p class="text-cyan-400">TEAM: <strong class="text-yellow-400 glitch" data-text="DLW_SALES_FORCE">DLW_SALES_FORCE</strong></p>
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mt-3 text-xs">
                    <div class="bg-green-900 bg-opacity-30 p-2 rounded border border-green-500">
                        <div class="text-green-400">PIPELINE:</div>
                        <div class="text-white font-bold">$<span id="total-pipeline">0</span></div>
                    </div>
                    <div class="bg-blue-900 bg-opacity-30 p-2 rounded border border-blue-500">
                        <div class="text-blue-400">ACTIVE DEALS:</div>
                        <div class="text-white font-bold"><span id="active-deals">0</span></div>
                    </div>
                    <div class="bg-purple-900 bg-opacity-30 p-2 rounded border border-purple-500">
                        <div class="text-purple-400">THIS WEEK:</div>
                        <div class="text-white font-bold">$<span id="week-revenue">0</span></div>
                    </div>
                    <div class="bg-red-900 bg-opacity-30 p-2 rounded border border-red-500">
                        <div class="text-red-400">QUOTA:</div>
                        <div class="text-white font-bold"><span id="quota-progress">0</span>%</div>
                    </div>
                </div>
                <p class="text-gray-500 text-xs mt-2">
                    <span class="flicker">CONNECTION_ESTABLISHED</span> | 
                    <span id="time" class="text-green-400"></span> |
                    <span id="db-status" class="text-green-400">[INITIALIZING]</span> |
                    <button onclick="toggleLeaderboard()" class="text-yellow-400 hover:text-yellow-300 cursor-pointer">LEADERBOARD</button>
                </p>
            </div>
        </header>

        <!-- Enhanced task creation with sales fields -->
        <div class="mb-8 max-w-2xl mx-auto neon-border rounded-xl p-4 sm:p-6">
            <h2 class="text-2xl font-bold mb-4 text-center text-cyan-400 glitch" data-text="INJECT_SALES_TASK">INJECT_SALES_TASK</h2>
            <form id="add-task-form">
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
                    <div>
                        <label for="task-type-select" class="block text-sm text-green-400 mb-2">TASK_TYPE:</label>
                        <select id="task-type-select" class="cyber-input w-full px-3 py-2 rounded text-sm">
                            <option value="general">General Task</option>
                            <option value="lead-generation">üéØ Lead Generation</option>
                            <option value="demo">üñ•Ô∏è Demo/Presentation</option>
                            <option value="proposal">üìÑ Proposal</option>
                            <option value="follow-up">üìû Follow-up</option>
                            <option value="contract">‚úçÔ∏è Contract</option>
                            <option value="onboarding">üöÄ Onboarding</option>
                        </select>
                    </div>
                    <div>
                        <label for="assignee-select" class="block text-sm text-green-400 mb-2">TARGET_AGENT:</label>
                        <select id="assignee-select" class="cyber-input w-full px-3 py-2 rounded text-sm">
                            <option value="Adam">Adam (AE)</option>
                            <option value="Nick">Nick (SDR)</option>
                            <option value="Omar">Omar (CS)</option>
                        </select>
                    </div>
                    <div>
                        <label for="priority-select" class="block text-sm text-green-400 mb-2">PRIORITY:</label>
                        <select id="priority-select" class="cyber-input w-full px-3 py-2 rounded text-sm">
                            <option value="low">Low</option>
                            <option value="medium">Medium</option>
                            <option value="high">üî• High</option>
                            <option value="urgent">‚ö° URGENT</option>
                        </select>
                    </div>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                    <div>
                        <label for="deal-value-input" class="block text-sm text-green-400 mb-2">DEAL_VALUE ($):</label>
                        <input type="number" id="deal-value-input" placeholder="25000" 
                            class="cyber-input w-full px-3 py-2 rounded text-sm">
                    </div>
                    <div>
                        <label for="due-date-input" class="block text-sm text-green-400 mb-2">DUE_DATE:</label>
                        <input type="date" id="due-date-input" 
                            class="cyber-input w-full px-3 py-2 rounded text-sm">
                    </div>
                </div>
                
                <input type="text" id="task-input" placeholder="&gt; Enter sales task details..." 
                    class="cyber-input w-full px-4 py-3 rounded text-sm mb-4" required>
                    
                <button type="submit" class="cyber-button w-full py-3 px-4 rounded font-bold">
                    EXECUTE_SALES_COMMAND
                </button>
            </form>
        </div>

        <!-- Enhanced kanban with sales-specific columns -->
        <div class="grid grid-cols-1 md:grid-cols-4 gap-6">
            <div id="todo" class="kanban-column rounded-xl p-4">
                <h2 class="text-xl font-bold mb-4 text-center text-green-400">
                    <span class="corrupted">[PROSPECTING]</span>
                    <div class="text-xs text-green-600 mt-1">New & Qualifying</div>
                </h2>
                <div id="todo-tasks" class="space-y-4 relative z-10"></div>
            </div>

            <div id="inprogress" class="kanban-column rounded-xl p-4">
                <h2 class="text-xl font-bold mb-4 text-center text-cyan-400">
                    <span class="corrupted">[ACTIVE_DEALS]</span>
                    <div class="text-xs text-cyan-600 mt-1">Demos & Proposals</div>
                </h2>
                <div id="inprogress-tasks" class="space-y-4 relative z-10"></div>
            </div>
            
            <!-- New: Negotiation column -->
            <div id="negotiation" class="kanban-column rounded-xl p-4">
                <h2 class="text-xl font-bold mb-4 text-center text-yellow-400">
                    <span class="corrupted">[CLOSING]</span>
                    <div class="text-xs text-yellow-600 mt-1">Contracts & Negotiations</div>
                </h2>
                <div id="negotiation-tasks" class="space-y-4 relative z-10"></div>
            </div>

            <div id="done" class="kanban-column rounded-xl p-4">
                <h2 class="text-xl font-bold mb-4 text-center text-pink-400">
                    <span class="corrupted">[REVENUE]</span>
                    <div class="text-xs text-pink-600 mt-1">Closed & Onboarding</div>
                </h2>
                <div id="done-tasks" class="space-y-4 relative z-10"></div>
            </div>
        </div>
        
        <!-- New: Quick Actions Bar -->
        <div class="fixed bottom-6 left-1/2 transform -translate-x-1/2 bg-black bg-opacity-90 border border-cyan-500 rounded-full px-6 py-3 flex gap-4 z-50">
            <button onclick="createQuickTask('demo')" class="text-cyan-400 hover:text-cyan-300 text-sm">
                üñ•Ô∏è DEMO
            </button>
            <button onclick="createQuickTask('follow-up')" class="text-green-400 hover:text-green-300 text-sm">
                üìû FOLLOW-UP
            </button>
            <button onclick="createQuickTask('proposal')" class="text-purple-400 hover:text-purple-300 text-sm">
                üìÑ PROPOSAL
            </button>
            <button onclick="generateSalesReport()" class="text-yellow-400 hover:text-yellow-300 text-sm">
                üìä REPORT
            </button>
            <button onclick="syncCRM()" class="text-red-400 hover:text-red-300 text-sm">
                üîÑ SYNC CRM
            </button>
        </div>
    </div>

    <canvas id="confetti-canvas"></canvas>
    
    <div class="copyright">
        ¬© 2025 Digital Luxe Sales - All Rights Reserved
    </div>
    
    <!-- Enhanced styles for sales features -->
    <style>
        .task-card {
            position: relative;
        }
        
        .task-card[data-priority="high"] {
            border-left: 4px solid #ff6b35;
            animation: pulse-orange 2s infinite;
        }
        
        .task-card[data-priority="urgent"] {
            border-left: 4px solid #ff0000;
            animation: pulse-red 1s infinite;
            box-shadow: 0 0 15px rgba(255, 0, 0, 0.3);
        }
        
        @keyframes pulse-orange {
            0%, 100% { border-left-color: #ff6b35; }
            50% { border-left-color: #ff8c42; }
        }
        
        @keyframes pulse-red {
            0%, 100% { border-left-color: #ff0000; }
            50% { border-left-color: #ff4444; }
        }
        
        .deal-value {
            position: absolute;
            top: 8px;
            right: 30px;
            background: rgba(0, 255, 0, 0.2);
            border: 1px solid #00ff00;
            border-radius: 12px;
            padding: 2px 8px;
            font-size: 10px;
            color: #00ff00;
        }
        
        .task-icon {
            position: absolute;
            top: 8px;
            left: 8px;
            font-size: 16px;
        }
        
        .leaderboard-panel {
            backdrop-filter: blur(10px);
        }
        
        .leaderboard-item {
            display: flex;
            justify-content: space-between;
            padding: 4px 0;
            border-bottom: 1px solid rgba(255, 255, 0, 0.2);
        }
        
        .quick-actions {
            backdrop-filter: blur(15px);
        }
    </style>
    
    <script src="notifications.js" defer></script>
    <!-- Temporarily disabled search-filters.js -->
    <!-- <script src="search-filters.js" defer></script> -->
    <script src="socket-client.js" defer></script>
    <script src="script.js" defer></script>
    <script src="sales-features.js" defer></script>
</body>
</html>